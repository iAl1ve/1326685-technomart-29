const KEY_ESC=27,CLASS_MODAL_SHOW="modal--show",CLASS_MODAL_ERROE="modal--error",CLASS_SLIDER_SHOW="slider__item--show",CLASS_PREFIX_ACTIVE="active";let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}const modalMap=document.querySelector(".modal-map"),modalMapClose=modalMap.querySelector(".modal-map__btn-exit"),showMapBtn=document.querySelector(".contacts__link"),closeModalMap=function(e){e.preventDefault(),modalMap.classList.remove("modal--show")};showMapBtn.addEventListener("click",e=>{e.preventDefault(),modalMap.classList.add("modal--show")}),modalMapClose.addEventListener("click",closeModalMap);const modalFeedback=document.querySelector(".modal-feedback"),showFeedbackBtn=document.querySelector(".contacts__btn"),modalFeedbackLogin=modalFeedback.querySelector(".modal-feedback__input--name"),modalFeedbackEmail=modalFeedback.querySelector(".modal-feedback__input--email"),modalFeedbackTextarea=modalFeedback.querySelector(".modal-feedback__textarea"),modalFeedbackClose=modalFeedback.querySelector(".modal-feedback__btn-exit"),feedbackForm=modalFeedback.querySelector(".modal-feedback__form");showFeedbackBtn.addEventListener("click",e=>{e.preventDefault(),modalFeedback.classList.add("modal--show"),feedbackForm.addEventListener("submit",onSubmitFeedbackForm),storage?(modalFeedbackLogin.value=localStorage.getItem("login"),modalFeedbackEmail.value=localStorage.getItem("email"),modalFeedbackTextarea.focus()):modalFeedbackLogin.focus()});const closeModalFeedback=function(e){e.preventDefault(),modalFeedback.classList.remove("modal--show"),modalFeedback.classList.remove("modal--error"),feedbackForm.removeEventListener("submit",onSubmitFeedbackForm)};modalFeedbackClose.addEventListener("click",closeModalFeedback);const onSubmitFeedbackForm=function(e){modalFeedbackLogin.value&&modalFeedbackEmail.value&&modalFeedbackTextarea.value?isStorageSupport&&(localStorage.setItem("login",modalFeedbackLogin.value),localStorage.setItem("email",modalFeedbackEmail.value)):(e.preventDefault(),modalFeedback.classList.remove("modal--error"),modalFeedback.offsetWidth,modalFeedback.classList.add("modal--error"))},sliderBackBtn=document.querySelector(".slider__back"),sliderNextBtn=document.querySelector(".slider__next"),sliderToggleBtns=document.querySelectorAll(".slider__toggle"),sliderItems=document.querySelectorAll(".slider__item");let activeSliderItemId=0;sliderItems.forEach((e,t)=>{e.classList.contains(CLASS_SLIDER_SHOW)&&(activeSliderItemId=t)}),sliderBackBtn.addEventListener("click",e=>{e.preventDefault(),onClickSlideSwitch(activeSliderItemId-1)}),sliderNextBtn.addEventListener("click",e=>{e.preventDefault(),onClickSlideSwitch(activeSliderItemId+1)});const onClickToggle=function(e){sliderItems[activeSliderItemId].classList.remove(CLASS_SLIDER_SHOW),sliderToggleBtns[activeSliderItemId].classList.remove("slider__toggle--active"),sliderToggleBtns.forEach((t,l)=>{t===e.target&&(activeSliderItemId=l)}),sliderToggleBtns[activeSliderItemId].classList.add("slider__toggle--active"),sliderItems[activeSliderItemId].classList.add(CLASS_SLIDER_SHOW)};sliderToggleBtns.forEach(e=>{e.addEventListener("click",onClickToggle)});const onClickSlideSwitch=function(e){sliderItems[activeSliderItemId].classList.remove(CLASS_SLIDER_SHOW),sliderToggleBtns[activeSliderItemId].classList.remove("slider__toggle--active"),activeSliderItemId=e>sliderItems.length-1?0:e<0?sliderItems.length-1:e,sliderToggleBtns[activeSliderItemId].classList.add("slider__toggle--active"),sliderItems[activeSliderItemId].classList.add(CLASS_SLIDER_SHOW)},serviceBtns=document.querySelectorAll(".service__btn"),serviceSliders=document.querySelectorAll(".service__slider"),sliderDelivery=document.querySelector(".service__slider--delivery"),sliderWarranty=document.querySelector(".service__slider--warranty"),sliderCredit=document.querySelector(".service__slider--credit");let activeSliderServiceItemId=0;const onClickServiceBtns=function(e){serviceBtns[activeSliderServiceItemId].classList.remove("service__btn--active"),serviceSliders[activeSliderServiceItemId].classList.remove("service__slider--active"),serviceBtns.forEach((t,l)=>{t===e.target&&(activeSliderServiceItemId=l)}),serviceBtns[activeSliderServiceItemId].classList.add("service__btn--active"),serviceSliders[activeSliderServiceItemId].classList.add("service__slider--active")};serviceBtns.forEach((e,t)=>{e.classList.contains("service__btn--active")&&(activeSliderServiceItemId=t),e.addEventListener("click",onClickServiceBtns)});const cardBuyBtns=document.querySelectorAll(".card__btn--buy"),modalSucces=document.querySelector(".modal-succes"),modalSuccesClose=modalSucces.querySelector(".modal-succes__btn-exit"),buyCloseButton=modalSucces.querySelector(".modal-succes__btn-order"),basket=document.querySelector(".header__toolbar-link--basket"),onClickBuyBtns=function(e){e.preventDefault(),modalSucces.classList.add("modal--show"),basket.classList.add("header__toolbar-link--active")},closeModalSucces=function(e){e.preventDefault(),modalSucces.classList.remove("modal--show")};cardBuyBtns.forEach(e=>{e.addEventListener("click",onClickBuyBtns)}),modalSuccesClose.addEventListener("click",closeModalSucces),buyCloseButton.addEventListener("click",closeModalSucces),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalFeedback.classList.contains("modal--show")&&closeModalFeedback(e),modalMap.classList.contains("modal--show")&&closeModalMap(e),modalSucces.classList.contains("modal--show")&&closeModalSucces(e))});
